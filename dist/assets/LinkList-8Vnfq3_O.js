import{R as e,r as a,j as s}from"./index-Brnoxq21.js";const l="_linkList_1a7a6_3",t="_linkListHeader_1a7a6_31",n="_headerActions_1a7a6_45",c="_selectAllLabel_1a7a6_89",i="_selectAllCheckbox_1a7a6_119",r="_emptyMessage_1a7a6_143",o="_tagGroup_1a7a6_191",d="_tagGroupHeader_1a7a6_217",_="_expandIcon_1a7a6_267",h="_expanded_1a7a6_279",m="_linkTitle_1a7a6_337",u="_batchActions_1a7a6_371",x="_selectedCount_1a7a6_383",k="_btnDanger_1a7a6_393",j="_linkItem_1a7a6_427",b="_linkCheckbox_1a7a6_459",p="_linkCheckboxInput_1a7a6_467",g="_linkInfo_1a7a6_475",C="_linkActions_1a7a6_523",N="_btnEdit_1a7a6_535",v="_btnDelete_1a7a6_537",y="_btnCopy_1a7a6_539",L="_copied_1a7a6_609",f=e.memo(({links:e,searchTerm:f,sortBy:w,sortOrder:A,selectedLinks:T,onEditLink:D,onDeleteLink:E,onToggleSelectLink:I,onSelectAll:M,onBatchDelete:S})=>{const[$,O]=a.useState({}),[B,G]=a.useState(null),H=a.useCallback(e=>{O(a=>({...a,[e]:!a[e]}))},[]),R=a.useCallback(async(e,a)=>{try{await navigator.clipboard.writeText(e),G(a),setTimeout(()=>G(null),2e3)}catch(s){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();try{document.execCommand("copy"),G(a),setTimeout(()=>G(null),2e3)}catch(l){}document.body.removeChild(t)}},[]),q=a.useMemo(()=>e.filter(e=>{const a=f.toLowerCase();return e.title.toLowerCase().includes(a)||e.url.toLowerCase().includes(a)||e.tags.some(e=>e.toLowerCase().includes(a))}),[e,f]),z=a.useMemo(()=>[...q].sort((e,a)=>{let s=0;switch(w){case"title":s=e.title.localeCompare(a.title);break;case"url":s=e.url.localeCompare(a.url);break;case"tags":s=e.tags.length-a.tags.length;break;default:s=0}return"asc"===A?s:-s}),[q,w,A]),F=a.useMemo(()=>z.reduce((e,a)=>(0===a.tags.length?(e["未分类"]||(e["未分类"]=[]),e["未分类"].push(a)):a.tags.forEach(s=>{e[s]||(e[s]=[]),e[s].some(e=>e.id===a.id)||e[s].push(a)}),e),{}),[z]);return s.jsxs("div",{className:l,children:[s.jsxs("div",{className:t,children:[s.jsx("h2",{children:"列表"}),s.jsxs("div",{className:n,children:[e.length>0&&s.jsxs("label",{className:c,children:[s.jsx("input",{type:"checkbox",checked:T.length===e.length&&e.length>0,onChange:M,className:i}),"全选"]}),T.length>0&&s.jsxs("div",{className:u,children:[s.jsxs("span",{className:x,children:["已选 ",T.length," 个"]}),s.jsx("button",{className:k,onClick:S,children:"删除"})]})]})]}),0===Object.keys(F).length?s.jsx("div",{className:r,children:f?"没有找到匹配的链接":"暂无链接，添加一个吧！"}):Object.entries(F).map(([e,a])=>{const l=!1!==$[e];return s.jsxs("div",{className:o,children:[s.jsxs("div",{className:d,onClick:()=>H(e),children:[s.jsx("h3",{children:e}),s.jsx("span",{className:`${_} ${l?h:""}`,children:l?"▼":"▶"})]}),l&&s.jsx("ul",{children:a.map(e=>s.jsxs("li",{className:j,children:[s.jsx("div",{className:b,children:s.jsx("input",{type:"checkbox",checked:T.includes(e.id),onChange:()=>I(e.id),className:p})}),s.jsx("div",{className:g,children:s.jsx("h5",{children:s.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:m,children:e.title})})}),s.jsxs("div",{className:C,children:[s.jsx("button",{className:`${y} ${B===e.id?L:""}`,onClick:()=>R(e.url,e.id),title:"复制链接",children:B===e.id?"已复制":"复制"}),s.jsx("button",{className:N,onClick:()=>D(e),children:"编辑"}),s.jsx("button",{className:v,onClick:()=>E(e.id),children:"删除"})]})]},e.id))})]},e)})]})});export{f as default};
