import{r as e,j as t}from"./index-Brnoxq21.js";const i="_linkForm_ipuiq_2",s="_formGroup_ipuiq_12",l="_tagInputContainer_ipuiq_39",n="_tagsList_ipuiq_65",a="_tag_ipuiq_39",r="_tagSuggestions_ipuiq_138",u="_tagSuggestionItem_ipuiq_155",c="_formActions_ipuiq_173",o="_btnPrimary_ipuiq_196",d="_btnSecondary_ipuiq_212",m=({onAddLink:m,onUpdateLink:p,editingLink:_,onCancelEdit:h,existingTags:x})=>{const[g,j]=e.useState(""),[v,f]=e.useState(""),[b,q]=e.useState([]),[N,y]=e.useState(""),[C,S]=e.useState(!1),[k,L]=e.useState([]);e.useEffect(()=>{_?(j(_.title),f(_.url),q(_.tags)):(j(""),f(""),q([]),y(""))},[_]),e.useEffect(()=>{if(N.trim()){const e=x.filter(e=>e.toLowerCase().includes(N.toLowerCase())).filter(e=>!b.includes(e));L(e),S(e.length>0)}else S(!1),L([])},[N,x,b]);const E=e=>{e.preventDefault(),N.trim()&&!b.includes(N.trim())&&(q([...b,N.trim()]),y(""))};return t.jsxs("form",{className:i,onSubmit:e=>{e.preventDefault(),g.trim()&&v.trim()&&(_?p({id:_.id,title:g,url:v,tags:b}):(m({title:g,url:v,tags:b}),j(""),f(""),q([]),y("")))},children:[t.jsxs("div",{className:s,children:[t.jsx("label",{htmlFor:"title",children:"标题"}),t.jsx("input",{type:"text",id:"title",value:g,onChange:e=>j(e.target.value),placeholder:"请输入链接标题",required:!0})]}),t.jsxs("div",{className:s,children:[t.jsx("label",{htmlFor:"url",children:"链接"}),t.jsx("input",{type:"url",id:"url",value:v,onChange:e=>f(e.target.value),placeholder:"请输入链接地址",required:!0})]}),t.jsxs("div",{className:s,children:[t.jsx("label",{children:"标签"}),t.jsxs("div",{className:l,children:[t.jsx("input",{type:"text",value:N,onChange:e=>y(e.target.value),placeholder:"输入标签后按回车添加",onKeyPress:e=>"Enter"===e.key&&E(e),onFocus:()=>N.trim()&&S(k.length>0),onBlur:()=>setTimeout(()=>S(!1),200)}),t.jsx("button",{type:"button",onClick:E,children:"添加"}),C&&k.length>0&&t.jsx("div",{className:r,children:k.map((e,i)=>t.jsx("div",{className:u,onClick:()=>(e=>{b.includes(e)||q([...b,e]),y(""),S(!1)})(e),children:e},i))})]}),t.jsx("div",{className:n,children:b.map((e,i)=>t.jsxs("span",{className:a,children:[e,t.jsx("button",{type:"button",onClick:()=>(e=>{q(b.filter(t=>t!==e))})(e),children:"×"})]},i))})]}),t.jsxs("div",{className:c,children:[t.jsx("button",{type:"submit",className:o,children:_?"更新":"添加"}),_&&t.jsx("button",{type:"button",className:d,onClick:h,children:"取消"})]})]})};export{m as default};
