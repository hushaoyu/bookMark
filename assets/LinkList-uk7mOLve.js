import{R as e,r as s,j as l}from"./index-B25BVzYp.js";const i="_linkList_ypkim_3",n="_linkListHeader_ypkim_31",a="_headerActions_ypkim_45",t="_selectAllLabel_ypkim_89",c="_selectAllCheckbox_ypkim_119",r="_emptyMessage_ypkim_143",_="_tagGroup_ypkim_191",o="_tagGroupHeader_ypkim_217",d="_expandIcon_ypkim_267",m="_expanded_ypkim_279",h="_linkTitle_ypkim_337",k="_batchActions_ypkim_371",p="_selectedCount_ypkim_383",u="_btnDanger_ypkim_393",x="_linkItem_ypkim_427",j="_linkCheckbox_ypkim_459",y="_linkCheckboxInput_ypkim_467",g="_linkInfo_ypkim_475",b="_linkActions_ypkim_523",N="_btnEdit_ypkim_535",C="_btnDelete_ypkim_537",L=e.memo(({links:e,searchTerm:L,sortBy:v,sortOrder:f,selectedLinks:A,onEditLink:w,onDeleteLink:D,onToggleSelectLink:I,onSelectAll:M,onBatchDelete:E})=>{const[O,S]=s.useState({}),T=s.useCallback(e=>{S(s=>({...s,[e]:!s[e]}))},[]),B=s.useMemo(()=>e.filter(e=>{const s=L.toLowerCase();return e.title.toLowerCase().includes(s)||e.url.toLowerCase().includes(s)||e.tags.some(e=>e.toLowerCase().includes(s))}),[e,L]),G=s.useMemo(()=>[...B].sort((e,s)=>{let l=0;switch(v){case"title":l=e.title.localeCompare(s.title);break;case"url":l=e.url.localeCompare(s.url);break;case"tags":l=e.tags.length-s.tags.length;break;default:l=0}return"asc"===f?l:-l}),[B,v,f]),H=s.useMemo(()=>G.reduce((e,s)=>(0===s.tags.length?(e["未分类"]||(e["未分类"]=[]),e["未分类"].push(s)):s.tags.forEach(l=>{e[l]||(e[l]=[]),e[l].some(e=>e.id===s.id)||e[l].push(s)}),e),{}),[G]);return l.jsxs("div",{className:i,children:[l.jsxs("div",{className:n,children:[l.jsx("h2",{children:"列表"}),l.jsxs("div",{className:a,children:[e.length>0&&l.jsxs("label",{className:t,children:[l.jsx("input",{type:"checkbox",checked:A.length===e.length&&e.length>0,onChange:M,className:c}),"全选"]}),A.length>0&&l.jsxs("div",{className:k,children:[l.jsxs("span",{className:p,children:["已选 ",A.length," 个"]}),l.jsx("button",{className:u,onClick:E,children:"删除"})]})]})]}),0===Object.keys(H).length?l.jsx("div",{className:r,children:L?"没有找到匹配的链接":"暂无链接，添加一个吧！"}):Object.entries(H).map(([e,s])=>{const i=!1!==O[e];return l.jsxs("div",{className:_,children:[l.jsxs("div",{className:o,onClick:()=>T(e),children:[l.jsx("h3",{children:e}),l.jsx("span",{className:`${d} ${i?m:""}`,children:i?"▼":"▶"})]}),i&&l.jsx("ul",{children:s.map(e=>l.jsxs("li",{className:x,children:[l.jsx("div",{className:j,children:l.jsx("input",{type:"checkbox",checked:A.includes(e.id),onChange:()=>I(e.id),className:y})}),l.jsx("div",{className:g,children:l.jsx("h5",{children:l.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:h,children:e.title})})}),l.jsxs("div",{className:b,children:[l.jsx("button",{className:N,onClick:()=>w(e),children:"编辑"}),l.jsx("button",{className:C,onClick:()=>D(e.id),children:"删除"})]})]},e.id))})]},e)})]})});export{L as default};
