import{r as e,j as t,C as s,s as n}from"./index-C5JAu9Yw.js";const a="_taskListEditor_1v4rc_2",i="_taskListTitle_1v4rc_11",c="_taskList_1v4rc_2",l="_emptyText_1v4rc_57",r="_taskItem_1v4rc_67",o="_taskCheckbox_1v4rc_87",d="_taskText_1v4rc_121",u="_completed_1v4rc_131",_="_editBtn_1v4rc_137",m="_deleteBtn_1v4rc_138",h="_saveBtn_1v4rc_139",x="_cancelBtn_1v4rc_140",v="_editContainer_1v4rc_184",b="_editInput_1v4rc_192",j="_addTaskContainer_1v4rc_221",p="_addTaskInput_1v4rc_227",k="_addTaskBtn_1v4rc_245",g=({tasks:s,onChange:n})=>{const[g,N]=e.useState(""),[y,C]=e.useState(null),[f,S]=e.useState(""),T=()=>{if(!g.trim())return;const e={id:Date.now().toString(),text:g.trim(),completed:!1};n([...s,e]),N("")},B=e=>{C(e.id),S(e.text)},F=()=>{f.trim()&&y&&(n(s.map(e=>e.id===y?{...e,text:f.trim()}:e)),C(null),S(""))},P=()=>{C(null),S("")},w=(e,t)=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),"add"===t?T():F())};return t.jsxs("div",{className:a,children:[t.jsx("h4",{className:i,children:"ä»»åŠ¡åˆ—è¡¨"}),t.jsx("div",{className:c,children:0===s.length?t.jsx("p",{className:l,children:"æš‚æ— ä»»åŠ¡ï¼Œæ·»åŠ ä¸€ä¸ªå§ï¼"}):s.map(e=>t.jsxs("div",{className:r,children:[t.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>{return t=e.id,void n(s.map(e=>e.id===t?{...e,completed:!e.completed}:e));var t},className:o}),y===e.id?t.jsxs("div",{className:v,children:[t.jsx("input",{type:"text",value:f,onChange:e=>S(e.target.value),onKeyPress:e=>w(e,"save"),className:b,autoFocus:!0}),t.jsx("button",{onClick:F,className:h,title:"ä¿å­˜",children:"âœ“"}),t.jsx("button",{onClick:P,className:x,title:"å–æ¶ˆ",children:"âœ•"})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:`${d} ${e.completed?u:""}`,onDoubleClick:()=>B(e),children:e.text}),t.jsx("button",{onClick:()=>B(e),className:_,title:"ç¼–è¾‘",children:"âœï¸"}),t.jsx("button",{onClick:()=>{return t=e.id,void n(s.filter(e=>e.id!==t));var t},className:m,title:"åˆ é™¤",children:"ğŸ—‘ï¸"})]})]},e.id))}),t.jsxs("div",{className:j,children:[t.jsx("input",{type:"text",value:g,onChange:e=>N(e.target.value),onKeyPress:e=>w(e,"add"),placeholder:"è¾“å…¥æ–°ä»»åŠ¡...",className:p}),t.jsx("button",{type:"button",onClick:T,className:k,disabled:!g.trim(),children:"æ·»åŠ "})]})]})},N="_noteForm_1yjiv_3",y="_formGroup_1yjiv_15",C="_toolbar_1yjiv_93",f="_toolbarBtn_1yjiv_113",S="_checkboxLabel_1yjiv_345",T="_formActions_1yjiv_375",B="_btnPrimary_1yjiv_389",F="_btnSecondary_1yjiv_391",P=({onAddNote:a,onUpdateNote:i,editingNote:c,onCancelEdit:l,categories:r})=>{const[o,d]=e.useState(""),[u,_]=e.useState(""),[m,h]=e.useState("é»˜è®¤"),[x,v]=e.useState(!1),[b,j]=e.useState([]),p=e.useRef(null);e.useEffect(()=>{c?(d(c.title),_(c.content),h(c.category),v(c.isPinned),j(c.tasks||[])):(d(""),_(""),h("é»˜è®¤"),v(!1),j([]))},[c]);const k=e=>{const t=p.current;if(!t)return;const s=t.selectionStart,n=t.selectionEnd,a=u.substring(s,n);let i="";if(a){const t=a.split("\n");switch(e){case"indent":i=t.map(e=>"  "+e).join("\n");break;case"outdent":i=t.map(e=>e.replace(/^\s{1,2}/,"")).join("\n");break;case"bullet":i=t.map(e=>"- "+e).join("\n");break;case"number":i=t.map((e,t)=>`${t+1}. ${e}`).join("\n")}}else switch(e){case"indent":i="  ";break;case"bullet":i="- ";break;case"number":i="1. ";break;case"outdent":let e=s;for(;e>0&&"\n"!==u[e-1];)e--;if(u.substring(e,s).match(/^\s{1,2}/)){const n=u.substring(0,e),a=u.substring(s);return _(n+u.substring(e+2,s)+a),t.focus(),void t.setSelectionRange(e,e+(s-e-2))}return}const c=u.substring(0,s),l=u.substring(n);_(c+i+l),setTimeout(()=>{t.focus(),t.setSelectionRange(s+i.length,s+i.length)},0)};return t.jsxs("form",{className:N,onSubmit:e=>{if(e.preventDefault(),!o.trim()||!u.trim())return;const t=n(o),s=n(u),l=(new Date).toISOString();c?i({id:c.id,title:t,content:s,category:m,createdAt:c.createdAt,updatedAt:l,isPinned:x,tasks:b}):(a({title:t,content:s,category:m,isPinned:x,tasks:b}),d(""),_(""),h("é»˜è®¤"),v(!1),j([]))},children:[t.jsxs("div",{className:y,children:[t.jsx("label",{htmlFor:"title",children:"æ ‡é¢˜"}),t.jsx("input",{type:"text",id:"title",value:o,onChange:e=>d(e.target.value),placeholder:"è¯·è¾“å…¥å¤‡å¿˜å½•æ ‡é¢˜",required:!0})]}),t.jsxs("div",{className:y,children:[t.jsx("label",{htmlFor:"category",children:"åˆ†ç±»"}),t.jsx(s,{options:r.map(e=>({value:e,label:e})),value:m,onChange:h})]}),t.jsxs("div",{className:y,children:[t.jsx("label",{htmlFor:"content",children:"å†…å®¹"}),t.jsxs("div",{className:C,children:[t.jsx("button",{type:"button",className:f,onClick:()=>k("indent"),title:"å¢åŠ ç¼©è¿›",children:"â¡ï¸"}),t.jsx("button",{type:"button",className:f,onClick:()=>k("outdent"),title:"å‡å°‘ç¼©è¿›",children:"â¬…ï¸"}),t.jsx("button",{type:"button",className:f,onClick:()=>k("bullet"),title:"é¡¹ç›®ç¬¦å·",children:"â€¢"}),t.jsx("button",{type:"button",className:f,onClick:()=>k("number"),title:"ç¼–å·åˆ—è¡¨",children:"1."})]}),t.jsx("textarea",{ref:p,id:"content",value:u,onChange:e=>_(e.target.value),placeholder:"è¯·è¾“å…¥å¤‡å¿˜å½•å†…å®¹",rows:8,required:!0})]}),t.jsx(g,{tasks:b,onChange:j}),t.jsx("div",{className:y,children:t.jsxs("label",{className:S,children:[t.jsx("input",{type:"checkbox",checked:x,onChange:e=>v(e.target.checked)}),t.jsx("span",{children:"ç½®é¡¶æ­¤å¤‡å¿˜å½•"})]})}),t.jsxs("div",{className:T,children:[t.jsx("button",{type:"submit",className:B,children:c?"æ›´æ–°":"æ·»åŠ "}),c&&t.jsx("button",{type:"button",className:F,onClick:l,children:"å–æ¶ˆ"})]})]})};export{P as default};
