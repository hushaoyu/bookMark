import{R as e,r as s,j as t}from"./index-BhmU-MyQ.js";const l="_linkList_1tmfy_2",n="_linkListHeader_1tmfy_16",a="_headerActions_1tmfy_23",c="_selectAllLabel_1tmfy_45",i="_selectAllCheckbox_1tmfy_60",r="_emptyMessage_1tmfy_72",_="_tagGroup_1tmfy_96",o="_tagGroupHeader_1tmfy_109",d="_expandIcon_1tmfy_134",m="_expanded_1tmfy_140",h="_linkTitle_1tmfy_169",u="_batchActions_1tmfy_186",x="_selectedCount_1tmfy_192",k="_btnDanger_1tmfy_197",f="_linkItem_1tmfy_214",j="_linkCheckbox_1tmfy_230",y="_linkCheckboxInput_1tmfy_234",g="_linkInfo_1tmfy_238",b="_linkActions_1tmfy_262",p="_btnEdit_1tmfy_268",N="_btnDelete_1tmfy_269",C=e.memo(({links:e,searchTerm:C,sortBy:L,sortOrder:v,selectedLinks:A,onEditLink:w,onDeleteLink:D,onToggleSelectLink:I,onSelectAll:M,onBatchDelete:E})=>{const[O,S]=s.useState({}),T=s.useCallback(e=>{S(s=>({...s,[e]:!s[e]}))},[]),B=s.useMemo(()=>e.filter(e=>{const s=C.toLowerCase();return e.title.toLowerCase().includes(s)||e.url.toLowerCase().includes(s)||e.tags.some(e=>e.toLowerCase().includes(s))}),[e,C]),G=s.useMemo(()=>[...B].sort((e,s)=>{let t=0;switch(L){case"title":t=e.title.localeCompare(s.title);break;case"url":t=e.url.localeCompare(s.url);break;case"tags":t=e.tags.length-s.tags.length;break;default:t=0}return"asc"===v?t:-t}),[B,L,v]),H=s.useMemo(()=>G.reduce((e,s)=>(0===s.tags.length?(e["未分类"]||(e["未分类"]=[]),e["未分类"].push(s)):s.tags.forEach(t=>{e[t]||(e[t]=[]),e[t].some(e=>e.id===s.id)||e[t].push(s)}),e),{}),[G]);return t.jsxs("div",{className:l,children:[t.jsxs("div",{className:n,children:[t.jsx("h2",{children:"列表"}),t.jsxs("div",{className:a,children:[e.length>0&&t.jsxs("label",{className:c,children:[t.jsx("input",{type:"checkbox",checked:A.length===e.length&&e.length>0,onChange:M,className:i}),"全选"]}),A.length>0&&t.jsxs("div",{className:u,children:[t.jsxs("span",{className:x,children:["已选 ",A.length," 个"]}),t.jsx("button",{className:k,onClick:E,children:"删除"})]})]})]}),0===Object.keys(H).length?t.jsx("div",{className:r,children:C?"没有找到匹配的链接":"暂无链接，添加一个吧！"}):Object.entries(H).map(([e,s])=>{const l=!1!==O[e];return t.jsxs("div",{className:_,children:[t.jsxs("div",{className:o,onClick:()=>T(e),children:[t.jsx("h3",{children:e}),t.jsx("span",{className:`${d} ${l?m:""}`,children:l?"▼":"▶"})]}),l&&t.jsx("ul",{children:s.map(e=>t.jsxs("li",{className:f,children:[t.jsx("div",{className:j,children:t.jsx("input",{type:"checkbox",checked:A.includes(e.id),onChange:()=>I(e.id),className:y})}),t.jsx("div",{className:g,children:t.jsx("h4",{children:t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:h,children:e.title})})}),t.jsxs("div",{className:b,children:[t.jsx("button",{className:p,onClick:()=>w(e),children:"编辑"}),t.jsx("button",{className:N,onClick:()=>D(e.id),children:"删除"})]})]},e.id))})]},e)})]})});export{C as default};
